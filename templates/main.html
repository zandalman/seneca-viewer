{% extends "base.html" %}
{% block content %}
    <div id="json-options">
        <button onclick="$('#file-upload').trigger('click');">Upload JSON</button>
        <form id="upload-json" name="upload-json" method="post" enctype="multipart/form-data">
            <input type="file" name="file" id="file-upload" style="display: none;" onchange="form.submit(); form.reset();"/>
        </form>
        <button id="remove-json">Remove JSON</button>
        <button id="view-code">View Code</button>
        <label for="json-select">JSON select: </label>
        <select id="json-select" name="json">
            {%- for id, filename in json_options.items() %}
                <option value="{{ id }}">{{ filename }}</option>
            {%- endfor %}
        </select><hr class="main">
        <div id="code-dialog">
            <code id="json-code"></code>
        </div>
    </div>
    <div id="main-tabs">
        <ul>
            <li><a href="#spreadsheet">Define Logic</a></li>
            <li><a href="#parameter">Set variables</a></li>
            <li><a href="#visualizer" id="visualizer-tab">Visualize</a></li>
            <li><a href="#translator">Translate</a></li>
        </ul>
        <div id="spreadsheet">
            <div class="inner-element" id="event-list" style="text-align:center;"><span>drag + drop</span>
            </div>
            <div class="inner-element" id="sort-container">
                <div class="config-popup" style="display:none">
                    <div style="text-align:left; margin-left: 30px; margin-bottom: 10px;">configuration file: {{configfile}}
                    </div>
                    <div class="flex">
                        <button>edit file</button>
                        <button>choose new file</button>
                    </div>
                </div>

                <div class="menu-bar">
                    <button class="config">configuration</button>
                    <button id="toggleSorter">toggle sorter</button>
                </div>
                <div class="menu-bar">
                    <button class="upload">upload</button>
                    <button class="all">toggle all</button>
                    <button class="save">save JSON</button>
                    <button class="addEvent">add event</button>
                    <button class="addGroup">add group</button>
                    <input id='upload-json' type='file' hidden/>
                </div>
                <div class="hoz-context">
                    <input type="text" id="fileName" placeholder="file name">

                </div>
                <div id="sort-boxes"></div>
            </div>
            <div class="table-box">
                <div class="menu-bar">
                    <button class="all-tabs">all tables</button>
                    <button class="update">update</button>
                    <button class="clear-selected">clear selection</button>
                    <button class="delete-selected">delete selected</button>
                </div>
                <div class="second-tables">
                    <!-- dynamic tables here -->
                </div>
            </div>
            <div class="context" id="eventTableSelector">
                <div class="tabs-bar"></div>
                <div class="parameter-box" style="display:none;">
                    <select id="variable-lists">
                        <option value="" disabled selected>parameter</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="parameter">
            <div class="context" id="paramContext">
                <p>
                    <button id="generate">Generate?</button>
                </p>
                <p> Current file path:</p>
                <p> {{ file_folder }}</p>
                <p>Select file</p>
                <select id="jsonSelector" onchange="Sijax.request('get_json', [this.value]);">
                    {% for item in files %}
                    <option>{{ item }}</option>
                    {% endfor %}
                </select>
                <pre id="jsonDisplay"></pre>
            </div>
            <div class="inner-element" id="paramSet">
                <div class="hoz-context">
                    <button id="resetSort">sort by event</button>
                    <button id="getSettables">settables only</button>
                    <input id="paramSearch" placeholder="Search...">
                </div>
                <div class="pList">
                    <table id="table">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Sets</th>
                            <th>Event Type</th>
                            <th>subEvent</th>
                            <th>Event</th>
                            <th>value</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
            <div class="context" id="paramRepo">
                <button>save</button>
                <div id="clearAll" style="margin: 5px;">get all </div>
            </div>
        </div>
        <div id="visualizer">
            <div id="block-info">
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <div id="block-params"></div>
                    </tbody>
                </table>
            </div>
            <div class="row" id="channel-options">
                <label for="ch-select">Channel select: </label>
                <select id="ch-select" name="channels[]" multiple="multiple"></select>
                <label for="ev-select">Event select: </label>
                <select id="ev-select" name="events[]" multiple="multiple"></select>
            </div>
            <div id="channels">
                <i class="material-icons icon-button" id="fullscreen">fullscreen</i>
                <div class="row">
                    <div class="column left" style="width: 10%; height: 3em; text-align: center;">
                        <p>Events</p>
                    </div>
                    <div class="column" style="width: 90%;" id="event-names"></div>
                </div>
                <div id="signals">
                    <div class="row">
                        <div class="column left" style="width: 10%;">
                            <div id="channel-label-container"></div>
                        </div>
                        <div class="column" style="width: 90%;">
                            <div id="channel-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="translator">
            <p>Placeholder</p>
        </div>
    </div>
{% endblock %}